# /handoff — Session Handoff Command (MEM-4)

Generate a HANDOFF.md snapshot of this session so the next Claude session can resume
without reading the full transcript. Run this before /compact or before ending a session.

---

## What to do when this command is invoked

1. **Read the current state** — scan recent messages and any open files to understand:
   - What task is currently in progress (be specific: file name, function name, what stage)
   - What has been completed this session
   - What decisions were made and why

2. **Write HANDOFF.md** in the project root with the exact structure below.

3. **Confirm to the user**: "HANDOFF.md written. Safe to /compact or end session."

---

## HANDOFF.md structure

```markdown
# Session Handoff — [DATE] [TIME]
# Generated by /handoff. Read this at the start of the next session.

## Current Task
[One sentence: exactly what was being built, which file, what stage it was at]
Example: "Building context-monitor/hooks/context_meter.py — wrote _estimate_tokens(), stopped before _inject_warning()"

## Completed This Session
- [bullet: what finished, with file names]
- [bullet: what finished]

## Decisions Made
- [decision + one-line rationale]
- [decision + one-line rationale]

## Files Modified
| File | Change |
|------|--------|
| path/to/file.py | [one-line description of what changed] |

## Open Questions
- [anything unresolved that the next session needs to address]

## Resume Prompt
[Copy-paste prompt the next session should start with — be specific enough that no context is needed]
Example:
"Read PROJECT_INDEX.md and HANDOFF.md. Run all test suites.
Continue building context-monitor/hooks/context_meter.py.
Next function: _inject_warning(estimated_pct, threshold). It should return a string
warning message if estimated_pct > threshold, else empty string."

## Test Status
[Last known test counts and pass/fail]
```

---

## Rules

- **Never skip the Resume Prompt section** — it is the most important part.
- The Resume Prompt must be specific enough that a fresh Claude session can start working
  immediately without asking clarifying questions.
- Keep each section concise. HANDOFF.md should be readable in under 60 seconds.
- Do not include full code blocks — reference file names and function names instead.
- Do not include credentials, tokens, or API keys under any circumstances.
- If no task is in progress, write: "No active task. Next: [next item from SESSION_STATE.md]"
